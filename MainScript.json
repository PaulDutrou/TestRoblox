{"playerJoinCode": "local Players = game:GetService(\"Players\")\nlocal DataStoreService = game:GetService(\"DataStoreService\")\nlocal RunService = game:GetService(\"RunService\")\nlocal dataStore = DataStoreService:GetDataStore(\"Test51\")\nlocal rep = game:GetService(\"ReplicatedStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal Debris  = game:GetService(\"Debris\")\nlocal ServerStotage = game:GetService(\"ServerStorage\")\n\nlocal ServerScriptService = game:GetService(\"ServerScriptService\")\nlocal Modules = ServerScriptService:WaitForChild(\"Modules\")\n\nlocal httpService = game:GetService(\"HttpService\")\nlocal webhook = \"https://webhook.lewisakura.moe/api/webhooks/1307767276736352316/YNeE7GFYARD0IGUyHMmUnUDSFJEQizF9X47s9CwM35T5t3Oj6dEjkn34_0tEx-FkpMzd\"\n\nlocal function waitForRequestBudget(requestType)\n\tlocal currentBudget = DataStoreService:GetRequestBudgetForRequestType(requestType)\n\twhile currentBudget < 1 do\n\t\tcurrentBudget = DataStoreService:GetRequestBudgetForRequestType(requestType)\n\t\ttask.wait(5)\n\tend\nend\n\nlocal function SetPlayerMaxHealthSpeedAndJump(player)\n\tif player and player:FindFirstChild(\"Endurance\") and player:FindFirstChild(\"Swiftness\") and player:FindFirstChild(\"Agility\") then\n\t\tlocal enduranceValue = player.Endurance.Value\n\t\tplayer.Character.Humanoid.MaxHealth = enduranceValue + 100\n\t\tplayer.Character.Humanoid.Health = player.Character.Humanoid.MaxHealth\n\t\t\n\t\tlocal swiftnessValue = player.Swiftness.Value\n\t\tplayer.Character.Humanoid.WalkSpeed = swiftnessValue/1000 + 16\n\t\tif player.Character.Humanoid.WalkSpeed >= 150 then\n\t\t\tplayer.Character.Humanoid.WalkSpeed = 150\n\t\tend\n\n\t\tlocal agilityValue = player.Agility.Value\n\t\tplayer.Character.Humanoid.JumpPower = agilityValue/1000 + 50\n\t\tif player.Character.Humanoid.JumpPower >= 200 then\n\t\t\tplayer.Character.Humanoid.JumpPower = 200\n\t\tend\n\t\tplayer.Character.Humanoid.UseJumpPower = true\n\telse\n\t\twarn(\"Player or Endurance or Swiftness or Jump value not found.\")\n\tend\nend\n\nlocal function UpdatePlayerMaxHealthSpeedAndJump(player)\n\tif player and player:FindFirstChild(\"Endurance\") and player:FindFirstChild(\"Swiftness\") and player:FindFirstChild(\"Agility\") and player.Character and player.Character.Humanoid then\n\t\tlocal enduranceValue = player.Endurance.Value\n\t\tplayer.Character.Humanoid.MaxHealth = enduranceValue + 100\n\t\t\n\t\tlocal swiftnessValue = player.Swiftness.Value\n\t\tplayer.Character.Humanoid.WalkSpeed = swiftnessValue/1000 + 16\n\t\tif player.Character.Humanoid.WalkSpeed >= 150 then\n\t\t\tplayer.Character.Humanoid.WalkSpeed = 150\n\t\tend\n\t\t\n\t\tlocal agilityValue = player.Agility.Value\n\t\tplayer.Character.Humanoid.JumpPower = agilityValue/1000 + 50\n\t\tif player.Character.Humanoid.JumpPower >= 200 then\n\t\t\tplayer.Character.Humanoid.JumpPower = 200\n\t\tend\n\telse\t\n\t\twarn(\"Player or Endurance or Swiftness or Jump value not found.\")\n\tend\n\t\n\tif player.HoldingShift.Value == true then\n\t   player.Character.Humanoid.WalkSpeed = 16\n\t   player.Character.Humanoid.JumpPower = 50\t\n\tend\n\t\n\tif player.StopPlayer.Value == true then -- Line number 69 ehehe\n\t   player.Character.Humanoid.WalkSpeed = 0\n\t   player.Character.Humanoid.JumpPower = 0\t\n\tend\t\nend\n\nlocal function UpgradeMulti(plr,costValue,multiValue,StatName)\n\tprint(costValue)\n\tplr.Coins.Value -= costValue\n\tif StatName == \"CostS\" then\n\t\tif plr.Smulti.Value == 1 then\n\t\t\tplr.Smulti.Value = 10\n\t\telse\n\t\t\tplr.Smulti.Value = plr.Smulti.Value+10\n\t\tend\n\telseif StatName == \"CostE\" then\n\t\tif plr.Emulti.Value == 1 then\n\t\t\tplr.Emulti.Value = 10\n\t\telse\n\t\t\tplr.Emulti.Value = plr.Emulti.Value+10\n\t\tend\n\telseif StatName == \"CostP\" then\n\tif plr.Pmulti.Value == 1 then\n\t\tplr.Pmulti.Value = 10\n\telse\n\t\tplr.Pmulti.Value = plr.Pmulti.Value+10\n\tend\n\telseif StatName == \"CostSwiftness\" then\n\tif plr.Swiftnessmulti.Value == 1 then\n\t\tplr.Swiftnessmulti.Value = 10\n\telse\n\t\tplr.Swiftnessmulti.Value = plr.Swiftnessmulti.Value+10\n\tend\n\telseif StatName == \"CostAgility\" then\n\tif plr.Agilitymulti.Value == 1 then\n\t\tplr.Agilitymulti.Value = 10\n\telse\n\t\tplr.Agilitymulti.Value = plr.Agilitymulti.Value+10\n\tend\n    end\nend\n\nlocal DataStoreService = game:GetService(\"DataStoreService\")\nlocal achievementsStore = DataStoreService:GetDataStore(\"Achievements\")\n\nlocal milestones = {\n\t{ amount = 1000, key = \"1KAchievement\", message = \"1K\" },\n\t{ amount = 10000000, key = \"1MAchievement\", message = \"1M\" },\n\t{ amount = 1000000000, key = \"1BAchievement\", message = \"1B\" },\n\t{ amount = 1000000000000, key = \"1TAchievement\", message = \"1T\" },\n}\n\nlocal function checkAchievements(player, TP)\n\tfor _, milestone in ipairs(milestones) do\n\t\tlocal achievementKey = player.UserId .. \"_\" .. milestone.key\n\n\t\t-- Check if the player already has this achievement\n\t\tlocal success, hasAchievement = pcall(function()\n\t\t\treturn achievementsStore:GetAsync(achievementKey)\n\t\tend)\n\n\t\tif success and not hasAchievement and TP >= milestone.amount then\n\t\t\t-- Grant the achievement\n\t\t\tprint(\"Achievement unlocked: \" .. milestone.message)\n\n\t\t\t-- Send a notification through webhook\n\t\t\thttpService:PostAsync(webhook,\n\t\t\t\thttpService:JSONEncode({\n\t\t\t\t\tcontent = player.Name .. \" has achieved \" .. milestone.message .. \" total power!\"\n\t\t\t\t})\n\t\t\t)\n\n\t\t\t-- Save the achievement in DataStore\n\t\t\tlocal saveSuccess, saveError = pcall(function()\n\t\t\t\tachievementsStore:SetAsync(achievementKey, true)\n\t\t\tend)\n\n\t\t\tif not saveSuccess then\n\t\t\t\twarn(\"Failed to save achievement: \" .. saveError)\n\t\t\tend\n\t\telseif success and hasAchievement then\n\t\t\tprint(\"Player already has the achievement for: \" .. milestone.message)\n\t\telseif not success then\n\t\t\twarn(\"Could not check achievement status for milestone: \" .. milestone.amount)\n\t\tend\n\tend\nend\n\n\nlocal function CoolAuraEffect(emitter)\n\tlocal minSize = 1.05\n\tlocal maxSize = 1.1\n\tlocal pulseSpeed = 2\n\twhile true do\n\t\tlocal size = minSize + (maxSize - minSize) * (0.5 + 0.5 * math.sin(tick() * pulseSpeed))\n\n\t\temitter.Size = NumberSequence.new(size)\n\n\t\ttask.wait(.1)\n\tend\nend\nlocal function RainbowAura(aura)\n\tlocal x = 0\n\tlocal y = 0\n\tlocal z = 0\n\tlocal color = Color3.fromRGB(0,0,0)\n\twhile true do\n\t\tx = math.random(0,255)\n\t\ty = math.random(0,255)\n\t\tz = math.random(0,255)\n\t\tcolor = Color3.fromRGB(x,y,z)\n\t\taura.Color = ColorSequence.new(color)\n\t\ttask.wait(.5)\n\tend\nend\n\nlocal function giveAura(player)\n\tlocal TP = player.Endurance.Value + player.Strength.Value + player.Psychic.Value\n\tcheckAchievements(player, TP)\n\tlocal character = player.Character or player.CharacterAdded:Wait()\n\t\n\tlocal AURA = \"NoAura\"\n\tif TP >= 1000 and TP < 10000 then\n\t\tAURA = \"White Aura\"\n\telseif TP >= 10000 and TP < 50000 then\n\t\tAURA = \"Gray Aura\"\n\telseif TP >= 25000 and TP < 50000 then\n\t\tAURA = \"Cyan Aura\"\n\telseif TP >= 50000 and TP < 100000 then\n\t\tAURA = \"Yellow Aura\"\n\telseif TP >= 100000 and TP < 1000000 then\n\t\tAURA = \"Red Aura\"\n\telseif TP >= 1000000 and TP < 2000000 then\n\t\tAURA = \"Dark Aura\"\n\telseif TP >= 2000000 and TP < 10000000 then\n\t\tAURA = \"Green Aura\"\n\telseif TP >= 10000000 and TP < 100000000 then\n\t\tAURA = \"Blue Aura\"\n\telseif TP >= 100000000 and TP < 1000000000 then\n\t\tAURA = \"Rainbow Aura\"\t\n\telseif TP >= 1000000000 and TP < math.huge then\n\t\t--AURA = \"John's Aura\"\t\n\t\tAURA = \"?\"\t\n\tend\n\t\n\tif player.OLDAURA.Value ~= AURA then\n\t\tfor _, v in next, character:WaitForChild(\"RightLowerArm\"):GetChildren() do\n\t\t\tif v:IsA(\"ParticleEmitter\") then\n\t\t\t\tv:Destroy()\n\t\t\tend\n\t\tend\n\t\t\n\t\tfor _, v in next, character:WaitForChild(\"LeftLowerArm\"):GetChildren() do\n\t\t\tif v:IsA(\"ParticleEmitter\") then\n\t\t\t\tv:Destroy()\n\t\t\tend\n\t\tend\n\t\t\n\t\tlocal part = game.ReplicatedStorage.Auras:FindFirstChild(AURA)\n\n\t\tfor _, v in next, part:GetChildren() do\n\t\t\tif v:IsA(\"ParticleEmitter\") then\n\t\t\t\tlocal particleClone = v:Clone()\n\t\t\t\tparticleClone.Parent = character:WaitForChild(\"RightLowerArm\")\n\t\t\t\tlocal secondclone = particleClone:Clone()\n\t\t\t\tsecondclone.Parent = character:WaitForChild(\"LeftLowerArm\")\n\t\t\t\tif AURA == \"God Aura\" then\n\t\t\t\t\tcoroutine.wrap(CoolAuraEffect)(particleClone)\n\t\t\t\t\tcoroutine.wrap(CoolAuraEffect)(secondclone)\n\t\t\t\telseif AURA == \"Rainbow Aura\" then\n\t\t\t\t\tcoroutine.wrap(RainbowAura)(particleClone)\n\t\t\t\t\tcoroutine.wrap(RainbowAura)(secondclone)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\n\n\tplayer.OLDAURA.Value = AURA\nend\n\nlocal function CheckBestTrainingArea(player, StatName)\n\tlocal highest = 0\n\tlocal zoneName = nil\n\tfor _, v in ipairs(game.Workspace.Zones:FindFirstChild(StatName):GetChildren()) do\n\t\tif v.Required.Value > highest and v.Required.Value < player:FindFirstChild(StatName).Value then\n\t\t\thighest = v.Required.Value\n\t\t\tzoneName = v.Name\n\t\tend\n\tend\n\treturn zoneName, highest\nend\n\n\nfunction CheckTrainingZone(player,stat)\n\tlocal Amount = player.Strength.Value\n\tlocal workspace = game:GetService(\"Workspace\")\n\tlocal zoneFolder = workspace:FindFirstChild(\"Zones\")  -- Corrected name if your folder is named \"Zones\"\n\tif stat == \"Strength\" then\n\t\tzoneFolder = workspace:FindFirstChild(\"Zones\").Strength\n\t\tAmount = player.Strength.Value\n\telseif stat == \"Endurance\" then\n\t\tzoneFolder = workspace:FindFirstChild(\"Zones\").Endurance\n\t\tAmount = player.Endurance.Value\n\telseif stat == \"Psychic\" then\n\t\tzoneFolder = workspace:FindFirstChild(\"Zones\").Psychic\n\t\tAmount = player.Psychic.Value\n\tend\n\tif zoneFolder then\n\t\tlocal playerPosition = player.Character.HumanoidRootPart.Position\n\t\tfor _, part in ipairs(zoneFolder:GetChildren()) do\n\t\t\tif part:IsA(\"Part\") and part:FindFirstChild(\"Multiplier\") and part:FindFirstChild(\"Required\") then\n\t\t\t\tlocal requiredStrength = part.Required.Value\n\n\t\t\t\tif Amount >= requiredStrength then\n\t\t\t\t\tlocal partPosition = part.Position\n\t\t\t\t\tlocal partSize = part.Size.magnitude / 2\n\t\t\t\t\tlocal distance = (playerPosition - partPosition).magnitude\n\t\t\t\t\tif distance <= partSize then\n\t\t\t\t\t\tlocal multiplier = part.Multiplier.Value\n\t\t\t\t\t\t--print(\"Player is inside zone '\" .. part.Name .. \"'. Multiplier: \" .. multiplier)\n\t\t\t\t\t\treturn multiplier\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\n\n\t--print(\"Player is not inside any training zone or does not meet requirements. Default multiplier: 1\")\n\treturn 1 -- Default multiplier if not in any training zone or doesn't meet requirements\nend\n\nlocal function updateNameTag(player)\n\tlocal plrTag = player.Character.Head:FindFirstChild(\"NameTag\")\n\tif player.leaderstats.Rank.Value == \"Innocent\" then\n\t\tplrTag.TextLabel.Text = \"\"\n\telseif player.leaderstats.Rank.Value == \"Protector\" then\n\t\tplrTag.TextLabel.Text = player.leaderstats.Rank.Value\n\t\tplrTag.TextLabel.TextColor3 = Color3.fromRGB(238, 219, 9)\n\telseif player.leaderstats.Rank.Value == \"Guardian\" then\n\t\tplrTag.TextLabel.Text = player.leaderstats.Rank.Value\n\t\tplrTag.TextLabel.TextColor3 = Color3.fromRGB(45, 206, 20)\n\telseif player.leaderstats.Rank.Value == \"Superhero\" then\n\t\tplrTag.TextLabel.Text = player.leaderstats.Rank.Value\n\t\tplrTag.TextLabel.TextColor3 = Color3.fromRGB(3, 3, 239)\n\telseif player.leaderstats.Rank.Value == \"Thug\" then\n\t\tplrTag.TextLabel.Text = player.leaderstats.Rank.Value\n\t\tplrTag.TextLabel.TextColor3 = Color3.fromRGB(239, 169, 6)\n\telseif player.leaderstats.Rank.Value == \"Criminal\" then\n\t\tplrTag.TextLabel.Text = player.leaderstats.Rank.Value\n\t\tplrTag.TextLabel.TextColor3 = Color3.fromRGB(204, 5, 8)\n\telseif player.leaderstats.Rank.Value == \"Supervillain\" then\n\t\tplrTag.TextLabel.Text = player.leaderstats.Rank.Value\n\t\tplrTag.TextLabel.TextColor3 = Color3.fromRGB(205, 13, 239)\n\tend\nend\n\nlocal function SetPlrRank(player)\n\tif player.Rep.Value <= -10 and player.Rep.Value < -5 then\n\t\tplayer.leaderstats.Rank.Value = \"Supervillain\"\n\telseif player.Rep.Value <= -5 and player.Rep.Value < -1  then\n\t\tplayer.leaderstats.Rank.Value = \"Criminal\"\n\telseif player.Rep.Value <= -1 and player.Rep.Value < 0  then\n\t\tplayer.leaderstats.Rank.Value = \"Thug\"\n\telseif player.Rep.Value == 0 then\n\t\tplayer.leaderstats.Rank.Value = \"Innocent\"\n\telseif player.Rep.Value >= 1 and player.Rep.Value < 5  then\n\t\tplayer.leaderstats.Rank.Value = \"Protector\"\n\telseif player.Rep.Value >= 5 and player.Rep.Value < 10  then\n\t\tplayer.leaderstats.Rank.Value = \"Guardian\"\n\telseif player.Rep.Value >= 10 and player.Rep.Value < math.huge  then\n\t\tplayer.leaderstats.Rank.Value = \"Superhero\"\n\tend\n\tupdateNameTag(player)\nend\n\nlocal function Tag (player, otherplayer)\n\tlocal tag = Instance.new(\"ObjectValue\")\n\ttag.Value = player\n\ttag.Name = \"creator\"\n\ttag.Parent = otherplayer\n\tDebris:AddItem(tag, 0.5)\nend\n\nlocal function giverep(player, otherplayer)\n\tprint(player, otherplayer)\n\tprint(otherplayer.Rep.Value)\n\tif otherplayer.Rep.Value < 0 then\n\t\tplayer.Kills.VillainKilled.Value += 1\n\t\tplayer.Rep.Value += 1\n\telseif otherplayer.Rep.Value == 0 then\n\t\tplayer.Kills.InnocentKilled.Value += 1\n\t\tplayer.Rep.Value -= 1\n\telseif otherplayer.Rep.Value > 0 then\n\t\tplayer.Kills.HeroKilled.Value += 1\n\t\tplayer.Rep.Value -= 1\n\tend\n\tSetPlrRank(player)\nend\n\n-- Example function to calculate punch amount with multiplier\nfunction CalculateAmount(player,stat)\n\tlocal baseAmount = 1 -- Base amount the player gets when punching\n\n\t-- Check if player is in a training zone\n\tlocal multiplier = CheckTrainingZone(player,stat)\n\n\t-- Calculate final punch amount with multiplier\n\tlocal finalAmount = baseAmount * multiplier\n\n\treturn finalAmount\nend\n\nlocal function UpdateQuest(plr, value, statName)\n\tif plr.QuestInfo.StatName.Value == statName then\n\t\tplr.QuestInfo.StartAmount.Value += value\n\tend\n\t\n\tif plr.SideQuestInfo.SideStatName.Value == statName then\n\t\tplr.SideQuestInfo.SideStartAmount.Value += value\n\tend\nend\n\nlocal function addStrength(player)\n\tif player.Cooldown.LastCallTime.Value > 1 then\n\t\tprint(\"Cooldown not expired yet\")\n\t\treturn\n\tend\n\n\tplayer.Cooldown.LastCallTime.Value = 69\n\n\tprint(\"+1 strength\")\n\tlocal plusamount = CalculateAmount(player, \"Strength\") * player.Smulti.Value\n\tplayer.Strength.Value += plusamount\n\tcoroutine.wrap(giveAura)(player)\n\tUpdateQuest(player,plusamount,\"Strength\")\n\ttask.wait(1)\n\tplayer.Cooldown.LastCallTime.Value = 0\nend\n\nlocal function addPsychic(player)\n\tif player.Cooldown.LastCallTime.Value > 1 then\n\t\tprint(\"Cooldown not expired yet\")\n\t\treturn\n\tend\n\n\tplayer.Cooldown.LastCallTime.Value = 69\n\t\n\tprint(\"+1 psychic\")\n\tlocal plusamount = CalculateAmount(player, \"Psychic\") * player.Pmulti.Value\n\tplayer.Psychic.Value += plusamount\n\tcoroutine.wrap(giveAura)(player)\n\tUpdateQuest(player,plusamount,\"Psychic\")\n\ttask.wait(1)\n\tplayer.Cooldown.LastCallTime.Value = 0\nend\n\nlocal function addEndurance(player)\n\tif player.Cooldown.LastCallTimeEndu.Value > 1 then\n\t\tprint(\"Cooldown not expired yet\")\n\t\treturn\n\tend\n\n\tplayer.Cooldown.LastCallTimeEndu.Value = 69\n\n\tprint(\"+1 endurance\")\n\tlocal plusamount = CalculateAmount(player, \"Endurance\") * player.Emulti.Value\n\tplayer.Endurance.Value += plusamount\n\tcoroutine.wrap(giveAura)(player)\n\tcoroutine.wrap(UpdatePlayerMaxHealthSpeedAndJump)(player)\n\tUpdateQuest(player,plusamount,\"Endurance\")\n\ttask.wait(1)\n\tplayer.Cooldown.LastCallTimeEndu.Value = 0\nend\n\nlocal function addSwiftness(player)\n\tif player.Cooldown.LastCallTimeSwiftness.Value > 1 then\n\t\tprint(\"Cooldown not expired yet\")\n\t\treturn\n\tend\n\n\tplayer.Cooldown.LastCallTimeSwiftness.Value = 69\n\n\tprint(\"+1 endurance\")\n\tplayer.Swiftness.Value = player.Swiftness.Value + CalculateAmount(player, \"Swiftness\") * player.Swiftnessmulti.Value\n\tcoroutine.wrap(UpdatePlayerMaxHealthSpeedAndJump)(player)\n\ttask.wait(1)\n\tplayer.Cooldown.LastCallTimeSwiftness.Value = 0\nend\n\nlocal function addAgility(player)\n\tif player.Cooldown.LastCallTimeAgility.Value > 1 then\n\t\tprint(\"Cooldown not expired yet\")\n\t\treturn\n\tend\n\n\tplayer.Cooldown.LastCallTimeAgility.Value = 69\n\n\tprint(\"+1 endurance\")\n\tplayer.Agility.Value = player.Agility.Value + CalculateAmount(player, \"Agility\") * player.Agilitymulti.Value\n\tcoroutine.wrap(UpdatePlayerMaxHealthSpeedAndJump)(player)\n\ttask.wait(1)\n\tplayer.Cooldown.LastCallTimeAgility.Value = 0\nend\n\nlocal EnduZone = workspace.Zones.Endurance:GetChildren()\nfor _, zone in ipairs(EnduZone) do\n\tzone.Touched:Connect(function(hit)\n\t\tprint(\"ok\")\n\t\tlocal player = Players:GetPlayerFromCharacter(hit.Parent) or Players:GetPlayerFromCharacter(hit.Parent.Parent)\n\t\tprint(player)\n\t\tif player then\n\t\t\tif zone:IsA(\"Part\") then\n\t\t\t\twhile task.wait(1) do\n\t\t\t\t\tlocal playerPosition = player.Character.HumanoidRootPart.Position\n\t\t\t\t\tlocal partPosition = zone.Position\n\t\t\t\t\tlocal partSize = zone.Size.magnitude / 2\n\t\t\t\t\tlocal distance = (playerPosition - partPosition).magnitude\n\t\t\t\t\tif distance <= partSize then\n\t\t\t\t\t\tcoroutine.wrap(addEndurance)(player)\t\t\t\n\t\t\t\t\telse\t\t\t\t\n\t\t\t\t\t\treturn\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend)\nend\n\nlocal function setupPlayerData(player: player)\n\tlocal userID = player.UserId\n\tlocal key = \"Player_\"..userID\n\t\n\tlocal Skills = Instance.new(\"Folder\", player)\n\tSkills.Name = \"Skills\"\n\t\n\tlocal Teleport = Instance.new(\"BoolValue\", Skills)\n\tTeleport.Name = \"Teleport\"\n\tTeleport.Value = false\n\t\n\tlocal Flying = Instance.new(\"BoolValue\", Skills)\n\tFlying.Name = \"Flying\"\n\tFlying.Value = false\n\t\n\tlocal Snowball = Instance.new(\"BoolValue\", Skills)\n\tSnowball.Name = \"Snowball\"\n\tSnowball.Value = false\n\t\n\tlocal SpecialMoves = Instance.new(\"Folder\", Skills)\n\tSpecialMoves.Name = \"SpecialMoves\"\n\t\n\tlocal EquippedSpecialMove = Instance.new(\"StringValue\", SpecialMoves)\n\tEquippedSpecialMove.Name = \"EquippedSpecialMove\"\n\tEquippedSpecialMove.Value = \"nil\"\n\t\n\tlocal Move1 = Instance.new(\"IntValue\", SpecialMoves)\n\tMove1.Name = \"Move1\"\n\tMove1.Value = 0\n\t\n\tlocal Move2 = Instance.new(\"IntValue\", SpecialMoves)\n\tMove2.Name = \"Move2\"\n\tMove2.Value = 0\n\t\n\tlocal hasQuest = Instance.new(\"BoolValue\", player)\n\thasQuest.Name = \"hasQuest\"\n\thasQuest.Value = false\n\t\n\tlocal questNumber = Instance.new(\"IntValue\", player)\n\tquestNumber.Name = \"questNumber\"\n\tquestNumber.Value = 0\n\t\n\tlocal QuestInfo = Instance.new(\"Folder\", player)\n\tQuestInfo.Name = \"QuestInfo\"\n\t\n\tlocal StatName = Instance.new(\"StringValue\", QuestInfo)\n\tStatName.Name = \"StatName\"\n\tStatName.Value = \"nil\"\n\t\n\tlocal StartAmount = Instance.new(\"IntValue\", QuestInfo)\n\tStartAmount.Name = \"StartAmount\"\n\tStartAmount.Value = 0\n\t\n\tlocal GoalAmount = Instance.new(\"IntValue\", QuestInfo)\n\tGoalAmount.Name = \"GoalAmount\"\n\tGoalAmount.Value = 0\n\t\n\tlocal Reward = Instance.new(\"IntValue\", QuestInfo)\n\tReward.Name = \"Reward\"\n\tReward.Value = 0\n\t\n\tlocal SidequestNumber = Instance.new(\"IntValue\", player)\n\tSidequestNumber.Name = \"SidequestNumber\"\n\tSidequestNumber.Value = 0\n\n\tlocal SideQuestInfo = Instance.new(\"Folder\", player)\n\tSideQuestInfo.Name = \"SideQuestInfo\"\n\n\tlocal SideStatName = Instance.new(\"StringValue\", SideQuestInfo)\n\tSideStatName.Name = \"SideStatName\"\n\tSideStatName.Value = \"nil\"\n\n\tlocal SideStartAmount = Instance.new(\"IntValue\", SideQuestInfo)\n\tSideStartAmount.Name = \"SideStartAmount\"\n\tSideStartAmount.Value = 0\n\n\tlocal SideGoalAmount = Instance.new(\"IntValue\", SideQuestInfo)\n\tSideGoalAmount.Name = \"SideGoalAmount\"\n\tSideGoalAmount.Value = 0\n\n\tlocal SideReward = Instance.new(\"IntValue\", SideQuestInfo)\n\tSideReward.Name = \"SideReward\"\n\tSideReward.Value = 0\n\t\n\tlocal SidehasQuest = Instance.new(\"BoolValue\", player)\n\tSidehasQuest.Name = \"SidehasQuest\"\n\tSidehasQuest.Value = false\n\t\n\tlocal leaderstats = Instance.new(\"Folder\", player)\n\tleaderstats.Name = \"leaderstats\"\n\t\n\tlocal strength = Instance.new(\"NumberValue\", player)\n\tstrength.Name = \"Strength\"\n\tstrength.Value = 0\n\t\n\tlocal Agility = Instance.new(\"NumberValue\", player)\n\tAgility.Name = \"Agility\"\n\tAgility.Value = 0\n\t\n\tlocal Swiftness = Instance.new(\"NumberValue\", player)\n\tSwiftness.Name = \"Swiftness\"\n\tSwiftness.Value = 0\n\t\n\tlocal swiftnessMulti = Instance.new(\"IntValue\", player)\n\tswiftnessMulti.Name = \"Swiftnessmulti\"\n\tswiftnessMulti.Value = 1\n\t\n\tlocal agilityMulti = Instance.new(\"IntValue\", player)\n\tagilityMulti.Name = \"Agilitymulti\"\n\tagilityMulti.Value = 1\n\t\n\tlocal sMulti = Instance.new(\"IntValue\", player)\n\tsMulti.Name = \"Smulti\"\n\tsMulti.Value = 1\n\t\n\tlocal endurance = Instance.new(\"NumberValue\", player)\n\tendurance.Name = \"Endurance\"\n\tendurance.Value = 0\n\t\n\tlocal eMulti = Instance.new(\"IntValue\", player)\n\teMulti.Name = \"Emulti\"\n\teMulti.Value = 1\n\t\n\tlocal psychic = Instance.new(\"NumberValue\", player)\n\tpsychic.Name = \"Psychic\"\n\tpsychic.Value = 0\n\t\n\tlocal pMulti = Instance.new(\"IntValue\", player)\n\tpMulti.Name = \"Pmulti\"\n\tpMulti.Value = 1\n\t\n\tlocal coins = Instance.new(\"IntValue\", player)\n\tcoins.Name = \"Coins\"\n\tcoins.Value = 0\n\t\n\tlocal spentcoins = Instance.new(\"IntValue\", player)\n\tspentcoins.Name = \"SpentCoins\"\n\tspentcoins.Value = 0\n\t\n\tlocal Rank = Instance.new(\"StringValue\", leaderstats)\n\tRank.Name = \"Rank\"\n\tRank.Value = \"Innocent\"\n\t\n\tlocal Rep = Instance.new(\"IntValue\", player)\n\tRep.Name = \"Rep\"\n\tRep.Value = 0\n\t\n\t--cooldown for training\n\tlocal Cooldown = Instance.new(\"Folder\", player)\n\tCooldown.Name = \"Cooldown\"\n\t\n\tlocal LastCallTimeAgility = Instance.new(\"IntValue\", Cooldown)\n\tLastCallTimeAgility.Name = \"LastCallTimeAgility\"\n\tLastCallTimeAgility.Value = 0\n\t\n\tlocal LastCallTime = Instance.new(\"IntValue\", Cooldown)\n\tLastCallTime.Name = \"LastCallTime\"\n\tLastCallTime.Value = 0\n\t\n\tlocal LastCallTimeEndu = Instance.new(\"IntValue\", Cooldown)\n\tLastCallTimeEndu.Name = \"LastCallTimeEndu\"\n\tLastCallTimeEndu.Value = 0\n\t\n\tlocal LastCallTimeSwiftness = Instance.new(\"IntValue\", Cooldown)\n\tLastCallTimeSwiftness.Name = \"LastCallTimeSwiftness\"\n\tLastCallTimeSwiftness.Value = 0\n\t\n\tlocal OLDAURA = Instance.new(\"StringValue\", player)\n\tOLDAURA.Name = \"OLDAURA\"\n\tOLDAURA.Value = \"X\"\n\t\n\t--shift\n\tlocal HoldingShift = Instance.new(\"BoolValue\", player)\n\tHoldingShift.Name = \"HoldingShift\"\n\tHoldingShift.Value = false\n\t\n\tlocal StopPlayer = Instance.new(\"BoolValue\", player)\n\tStopPlayer.Name = \"StopPlayer\"\n\tStopPlayer.Value = false\n\t\n\tlocal Kills = Instance.new(\"Folder\", player)\n\tKills.Name = \"Kills\"\n\t\n\tlocal InnocentKilled = Instance.new(\"IntValue\", Kills)\n\tInnocentKilled.Name = \"InnocentKilled\"\n\tInnocentKilled.Value = 0\n\t\n\tlocal HeroKilled = Instance.new(\"IntValue\", Kills)\n\tHeroKilled.Name = \"HeroKilled\"\n\tHeroKilled.Value = 0\n\t\n\tlocal VillainKilled = Instance.new(\"IntValue\", Kills)\n\tVillainKilled.Name = \"VillainKilled\"\n\tVillainKilled.Value = 0\n\t\n\tlocal RocketDestroyed = Instance.new(\"IntValue\", Kills)\n\tRocketDestroyed.Name = \"RocketDestroyed\"\n\tRocketDestroyed.Value = 0\n\t\n\tlocal CollectingQuest = Instance.new(\"BoolValue\", player)\n\tCollectingQuest.Name = \"CollectingQuest\"\n\tCollectingQuest.Value = true\n\t\n\tlocal success, returnValue\n\trepeat\n\t\twaitForRequestBudget(Enum.DataStoreRequestType.GetAsync)\n\t\tsuccess, returnValue = pcall(dataStore.GetAsync, dataStore, key)\n\tuntil success or not Players:FindFirstChild(player.Name)\n\t\n\tif success then\n\t\tif returnValue == nil then\n\t\t\treturnValue = {\n\t\t\t\tTeleport = false,\n\t\t\t\tFlying = false,\n\t\t\t\tSnowball = false,\n\t\t\t\tEquippedSpecialMove = \"nil\",\n\t\t\t\tMove1 = 0,\n\t\t\t\tMove2 = 0,\n\t\t\t\thasQuest = false,\n\t\t\t\tquestNumber = 1,\n\t\t\t\tStatName = \"nil\",\n\t\t\t\tStartAmount = 0,\n\t\t\t\tGoalAmount = 0,\n\t\t\t\tReward = 0,\n\t\t\t\tSidehasQuest = false,\n\t\t\t\tSidequestNumber = 1,\n\t\t\t\tSideStatName = \"nil\",\n\t\t\t\tSideStartAmount = 0,\n\t\t\t\tSideGoalAmount = 0,\n\t\t\t\tSideReward = 0,\n\t\t\t\tStrength = 0,\n\t\t\t\tAgility = 0,\n\t\t\t\tSwiftness = 0,\n\t\t\t\tSmulti = 1,\n\t\t\t\tSwiftnessmulti = 1,\n\t\t\t\tAgilitymulti = 1,\n\t\t\t\tEndurance = 0,\n\t\t\t\tEmulti = 1,\n\t\t\t\tPsychic = 0,\n\t\t\t\tPmulti = 1,\n\t\t\t\tCoins = 0,\n\t\t\t\tSpentCoins = 0,\n\t\t\t\tRank = \"Innocent\",\n\t\t\t\tRep = 0,\n\t\t\t\tInnocentKilled = 0,\n\t\t\t\tHeroKilled = 0,\n\t\t\t\tVillainKilled = 0,\n\t\t\t\tRocketDestroyed = 0,\n\t\t\t}\n\t\tend\n\t\t\n\t\tprint(returnValue)\n\t\tstrength.Value = if returnValue.Strength ~= nil then returnValue.Strength else 0\n\t\tSwiftness.Value = if returnValue.Swiftness ~= nil then returnValue.Swiftness else 0\n\t\tAgility.Value = if returnValue.Agility ~= nil then returnValue.Agility else 0\n\t\tTeleport.Value = if returnValue.Teleport ~= nil then returnValue.Teleport else false\n\t\tFlying.Value = if returnValue.Flying ~= nil then returnValue.Flying else false\n\t\tSnowball.Value = if returnValue.Snowball ~= nil then returnValue.Snowball else false\n\t\tEquippedSpecialMove.Value = if returnValue.EquippedSpecialMove ~= nil then returnValue.EquippedSpecialMove else \"nil\"\n\t\tMove1.Value = if returnValue.Move1 ~= nil then returnValue.Move1 else 0\n\t\tMove2.Value = if returnValue.Move2 ~= nil then returnValue.Move2 else 0\n\t\thasQuest.Value = if returnValue.hasQuest ~= nil then returnValue.hasQuest else false\n\t\tquestNumber.Value = if returnValue.questNumber ~= nil then returnValue.questNumber else 1\n\t\tStatName.Value = if returnValue.StatName ~= nil then returnValue.StatName else \"nil\"\n\t\tStartAmount.Value = if returnValue.StartAmount ~= nil then returnValue.StartAmount else 0\n\t\tGoalAmount.Value = if returnValue.GoalAmount ~= nil then returnValue.GoalAmount else 0\n\t\tReward.Value = if returnValue.Reward ~= nil then returnValue.Reward else 0\n\t\tSidehasQuest.Value = if returnValue.SidehasQuest ~= nil then returnValue.SidehasQuest else false\n\t\tSidequestNumber.Value = if returnValue.SidequestNumber ~= nil then returnValue.SidequestNumber else 1\n\t\tSideStatName.Value = if returnValue.SideStatName ~= nil then returnValue.SideStatName else \"nil\"\n\t\tSideStartAmount.Value = if returnValue.SideStartAmount ~= nil then returnValue.SideStartAmount else 0\n\t\tSideGoalAmount.Value = if returnValue.SideGoalAmount ~= nil then returnValue.SideGoalAmount else 0\n\t\tSideReward.Value = if returnValue.SideReward ~= nil then returnValue.SideReward else 0\n\t\tsMulti.Value = if returnValue.Smulti ~= nil then returnValue.Smulti else 1\n\t\tswiftnessMulti.Value = if returnValue.Swiftnessmulti ~= nil then returnValue.Swiftnessmulti else 1\n\t\tagilityMulti.Value = if returnValue.Agilitymulti ~= nil then returnValue.Agilitymulti else 1\n\t\tendurance.Value = if returnValue.Endurance ~= nil then returnValue.Endurance else 0\n\t\teMulti.Value = if returnValue.Emulti ~= nil then returnValue.Emulti else 1\n\t\tpsychic.Value = if returnValue.Psychic ~= nil then returnValue.Psychic else 0\n\t\tpMulti.Value = if returnValue.Pmulti ~= nil then returnValue.Pmulti else 1\n\t\tcoins.Value = if returnValue.Coins ~= nil then returnValue.Coins else 0\n\t\tspentcoins.Value = if returnValue.SpentCoins ~= nil then returnValue.SpentCoins else 0\n\t\tRank.Value = if returnValue.Rank ~= nil then returnValue.Rank else \"Innocent\"\n\t\tRep.Value = if returnValue.Rep ~= nil then returnValue.Rep else 0\n\t\tInnocentKilled.Value = if returnValue.InnocentKilled ~= nil then returnValue.InnocentKilled else 0\n\t\tHeroKilled.Value = if returnValue.HeroKilled ~= nil then returnValue.HeroKilled else 0\n\t\tVillainKilled.Value = if returnValue.VillainKilled ~= nil then returnValue.VillainKilled else 0\n\t\tRocketDestroyed.Value = if returnValue.RocketDestroyed ~= nil then returnValue.RocketDestroyed else 0\n\telse\n\t\tplayer:Kick(\"Error loading ur data ma gee\")\n\tend\nend\n\nlocal function save(player)\n\tlocal userID = player.UserId\n\tlocal key = \"Player_\"..userID\n\t\n\tlocal strength = player.Strength.Value\n\tlocal Swiftness = player.Swiftness.Value\n\tlocal Agility = player.Agility.Value\n\tlocal Teleport = player.Skills.Teleport.Value\n\tlocal Flying = player.Skills.Flying.Value\n\tlocal Snowball = player.Skills.Snowball.Value\n\tlocal EquippedSpecialMove = player.Skills.SpecialMoves.EquippedSpecialMove.Value\n\tlocal Move1 = player.Skills.SpecialMoves.Move1.Value\n\tlocal Move2 = player.Skills.SpecialMoves.Move2.Value\n\tlocal hasQuest = player.hasQuest.Value\n\tlocal questNumber = player.questNumber.Value\n\tlocal StatName = player.QuestInfo.StatName.Value\n\tlocal StartAmount = player.QuestInfo.StartAmount.Value\n\tlocal GoalAmount = player.QuestInfo.GoalAmount.Value\n\tlocal Reward = player.QuestInfo.Reward.Value\n\tlocal SidehasQuest = player.SidehasQuest.Value\n\tlocal SidequestNumber = player.SidequestNumber.Value\n\tlocal SideStatName = player.SideQuestInfo.SideStatName.Value\n\tlocal SideStartAmount = player.SideQuestInfo.SideStartAmount.Value\n\tlocal SideGoalAmount = player.SideQuestInfo.SideGoalAmount.Value\n\tlocal SideReward = player.SideQuestInfo.SideReward.Value\n\tlocal sMulti = player.Smulti.Value\n\tlocal swiftnessMulti = player.Swiftnessmulti.Value\n\tlocal agilityMulti = player.Agilitymulti.Value\n\tlocal endurance = player.Endurance.Value\n\tlocal eMulti = player.Emulti.Value\n\tlocal psychic = player.Psychic.Value\n\tlocal pMulti = player.Pmulti.Value\n\tlocal coins = player.Coins.Value\n\tlocal spentcoins = player.SpentCoins.Value\n\tlocal Rank = player.leaderstats.Rank.Value\n\tlocal Rep = player.Rep.Value\n\tlocal InnocentKilled = player.Kills.InnocentKilled.Value\n\tlocal HeroKilled = player.Kills.HeroKilled.Value\n\tlocal VillainKilled = player.Kills.VillainKilled.Value\n\tlocal RocketDestroyed = player.Kills.RocketDestroyed.Value\n\t\n\tlocal dataTable = {\n\t\tStrength = strength,\n\t\tAgility = Agility,\n\t\tSwiftness = Swiftness,\n\t\tTeleport = Teleport,\n\t\tFlying = Flying,\n\t\tSnowball = Snowball,\n\t\tEquippedSpecialMove = EquippedSpecialMove,\n\t\tMove1 = Move1,\n\t\tMove2 = Move2,\n\t\thasQuest = hasQuest,\n\t\tquestNumber = questNumber,\n\t\tStatName = StatName,\n\t\tStartAmount = StartAmount,\n\t\tGoalAmount = GoalAmount,\n\t\tReward = Reward,\n\t\tSidehasQuest = SidehasQuest,\n\t\tSidequestNumber = SidequestNumber,\n\t\tSideStatName = SideStatName,\n\t\tSideStartAmount = SideStartAmount,\n\t\tSideGoalAmount = SideGoalAmount,\n\t\tSideReward = SideReward,\n\t\tSmulti = sMulti,\n\t\tSwiftnessmulti = swiftnessMulti,\n\t\tAgilitymulti = agilityMulti,\n\t\tEndurance = endurance,\n\t\tEmulti = eMulti,\n\t\tPsychic = psychic,\n\t\tPmulti = pMulti,\n\t\tCoins = coins,\n\t\tSpentCoins = spentcoins,\n\t\tRank = Rank,\n\t\tRep = Rep,\n\t\tInnocentKilled = InnocentKilled,\n\t\tHeroKilled = HeroKilled,\n\t\tVillainKilled = VillainKilled,\n\t\tRocketDestroyed = RocketDestroyed,\n\t}\n\tprint(dataTable)\n\t\n\tlocal success, returnValue\n\trepeat\n\t\twaitForRequestBudget(Enum.DataStoreRequestType.UpdateAsync)\n\t\tsuccess, returnValue = pcall(dataStore.UpdateAsync, dataStore, key, function()\n\t\t\treturn dataTable\n\t\tend)\n\tuntil success\n\t\n\tif success then\n\t\tprint(\"Ur data has been saved ma gee\")\n\telse\n\t\tprint(\"Error datasaving\")\n\tend\nend\n\nlocal function onShutdown()\n\tif RunService:IsStudio() then\n\t\ttask.wait(2)\n\telse\n\t\tlocal finished = Instance.new(\"BindableEvent\")\n\t\tlocal allPlayers = Players:GetPlayers()\n\t\tlocal leftPlayers = #allPlayers\n\t\t\n\t\tfor _, player in ipairs(allPlayers) do\n\t\t\tcoroutine.wrap(function()\n\t\t\t\tsave(player)\n\t\t\t\tleftPlayers -= 1\n\t\t\t\tif leftPlayers == 0 then\n\t\t\t\t\tfinished:Fire()\n\t\t\t\tend\n\t\t\tend)()\n\t\tend\n\t\tfinished.Event:Wait()\n\tend\nend\n\nfor _, player in ipairs(Players: GetPlayers()) do\n\tcoroutine.wrap(setupPlayerData)(player)\nend\n\nPlayers.PlayerAdded:Connect(setupPlayerData)\nPlayers.PlayerRemoving:Connect(save)\ngame:BindToClose(onShutdown)\n\nlocal function saveLoop()\n\twhile task.wait(600) do\n\t\tfor _, player in ipairs(Players: GetPlayers()) do\n\t\t\tcoroutine.wrap(save)(player)\n\t\tend\n\tend\nend\ncoroutine.wrap(saveLoop)\n\nrep.Train.PunchEvent.OnServerEvent:Connect(addStrength)\nrep.Train.EnduranceEvent.OnServerEvent:Connect(addEndurance)\nrep.Train.PsychicEvent.OnServerEvent:Connect(addPsychic)\nrep.UpgradeMulti.OnServerEvent:Connect(UpgradeMulti)\n\nrep.EnableQuest.OnServerEvent:Connect(function(plr)\n\tplr.hasQuest.Value = true\nend)\n\nrep.EnableSideQuest.OnServerEvent:Connect(function(plr)\n\tplr.SidehasQuest.Value = true\nend)\n\nrep.FinishedQuest.OnServerEvent:Connect(function(plr,price)\n\t--Give them players skills\n\tif plr.questNumber.Value == 1 then\n\t\tplr.Skills.Flying.Value = true\n\telseif plr.questNumber.Value == 2 then\n\t\tplr.Skills.Snowball.Value = true\n\telseif plr.questNumber.Value == 3 then\n\t\tplr.Skills.Teleport.Value = true\n\tend\n\t-- no more skills to give :L\n\t\n\tplr.hasQuest.Value = false\n\tplr.Coins.Value += price\n\tplr.questNumber.Value += 1\n\tplr.QuestInfo.StatName.Value = \"nil\"\n\tplr.QuestInfo.GoalAmount.Value = 0\n\tplr.QuestInfo.Reward.Value = 0\n\t\n\tplr.PlayerGui.Stats.Quest.QuestName.Text = \"No quest right now...\"\n\tplr.PlayerGui.Stats.Quest.CanvasGroup.Visible = false\nend)\n\nrep.FinishedSideQuest.OnServerEvent:Connect(function(plr,price)\n    plr.SidehasQuest.Value = false\n\tplr.Coins.Value += price\n\tplr.SidequestNumber.Value += 1\n\tplr.SideQuestInfo.SideStatName.Value = \"nil\"\n\tplr.SideQuestInfo.SideGoalAmount.Value = 0\n\tplr.SideQuestInfo.SideReward.Value = 0\n\tplr.SideQuestInfo.SideStartAmount.Value = 0\n\n\tplr.PlayerGui.Stats[\"Side Quest\"].QuestName.Text = \"No quest right now...\"\n\tplr.PlayerGui.Stats[\"Side Quest\"].CanvasGroup.Visible = false\nend)\n\nrep.Quest.GetAmountQuest.OnServerEvent:Connect(function(player,statname,goalamount,reward,curAmount,questName)\n\tplayer.QuestInfo.StatName.Value = statname\n\tplayer.QuestInfo.GoalAmount.Value = goalamount\n\tplayer.QuestInfo.Reward.Value = reward\n\tplayer.QuestInfo.StartAmount.Value = curAmount\n\t\n\tplayer.PlayerGui.Stats.Quest.QuestName.Text = questName\n\tif player.QuestInfo.StatName.Value == \"Strength\" then -- don't show the progress bar if the player don't even have a quest\n\telseif player.QuestInfo.StatName.Value == \"Psychic\" then\n\telseif player.QuestInfo.StatName.Value == \"Endurance\" then\t\n\telse return\n\tend\n\tplayer.PlayerGui.Stats.Quest.CanvasGroup.Visible = true\nend)\n\nrep.Quest.GetAmountSideQuest.OnServerEvent:Connect(function(player,statname,goalamount,reward,curAmount,questName)\n\tplayer.SideQuestInfo.SideStatName.Value = statname\n\tplayer.SideQuestInfo.SideGoalAmount.Value = goalamount\n\tplayer.SideQuestInfo.SideReward.Value = reward\n\tplayer.SideQuestInfo.SideStartAmount.Value = curAmount\n\n\tplayer.PlayerGui.Stats[\"Side Quest\"].QuestName.Text = questName\n\tif player.SideQuestInfo.SideStatName.Value == \"Strength\" then -- don't show the progress bar if the player don't even have a quest\n\telseif player.SideQuestInfo.SideStatName.Value == \"Psychic\" then\n\telseif player.SideQuestInfo.SideStatName.Value == \"Endurance\" then\t\n\telse return\n\tend\n\tplayer.PlayerGui.Stats[\"Side Quest\"].CanvasGroup.Visible = true\nend)\n\nlocal function teleportPlayer(player, targetPos)\n\tif player.Character.Humanoid and player.Character.Humanoid.Health >=0 then\n\t\t-- Define the maximum teleport distance\n\t\tlocal MAX_TELEPORT_DISTANCE = 500\n\t\t-- Function to teleport the player to the cursor position\n\t\tlocal playerPosition = player.Character and player.Character.PrimaryPart and player.Character.PrimaryPart.Position\n\t\tif playerPosition then\n\t\t\tlocal dist = (playerPosition - targetPos).magnitude\n\n\t\t\t-- Check if the distance is within the maximum teleport distance\n\t\t\tif dist <= MAX_TELEPORT_DISTANCE then\n\t\t\t\tplayer.Character:SetPrimaryPartCFrame(CFrame.new(targetPos))  -- Teleport the player\n\t\t\telse\n\t\t\t\t-- If distance exceeds the maximum, teleport the player towards the target within the limit\n\t\t\t\tlocal direction = (targetPos - playerPosition).unit\n\t\t\t\tlocal teleportPosition = playerPosition + direction * MAX_TELEPORT_DISTANCE\n\t\t\t\tplayer.Character:SetPrimaryPartCFrame(CFrame.new(teleportPosition))\n\t\t\tend\n\t\tend\n\tend\t\nend\n\nlocal GRAVITY = 196.2  -- Roblox's default gravity (in studs/second^2)\n\nlocal function throwSphere(player, targetPosition)\n\tlocal character = player.Character\n\tif not character then\n\t\treturn\n\tend\n\n\tlocal replicatedStorage = game:GetService(\"ReplicatedStorage\")\n\tlocal sphere = replicatedStorage:FindFirstChild(\"Sphere1\")\n\n\tif player.Strength.Value >= 0 and player.Strength.Value < 1000 then\n\t\tsphere = replicatedStorage:FindFirstChild(\"Sphere1\")\n\telseif player.Strength.Value >= 1000 and player.Strength.Value < math.huge then\n\t\tsphere = replicatedStorage:FindFirstChild(\"Sphere2\")\n\tend\n\tif not sphere then\n\t\treturn\n\tend\n\n\tlocal sphereClone = sphere:Clone()\n\n\tlocal spawnPosition = character.HumanoidRootPart.Position\n\n\tsphereClone.Position = spawnPosition\n\tsphereClone.Parent = workspace\n\n\n\tsphereClone.Anchored = false\n\tsphereClone.CanCollide = false\n\tsphereClone.Massless = true \n\n\n\tlocal throwDirection = (targetPosition - spawnPosition).unit\n\n\tsphereClone.Velocity = throwDirection * sphereClone.Speed.Value\n\n\tlocal bodyForce = Instance.new(\"BodyForce\")\n\tbodyForce.Force = Vector3.new(0, sphereClone:GetMass() * GRAVITY, 0)\n\tbodyForce.Parent = sphereClone\n\n\tlocal airTime = 0\n\tlocal inAir = true\n\n\tlocal damagedPlayers = {}\n\n\tspawn(function()\n\tend)\n\n\tspawn(function()\n\t\twhile inAir and airTime < sphereClone.AirTime.Value do\n\t\t\twait(1)\n\t\t\tairTime = airTime + 1\n\t\tend\n\n\t\tif sphereClone and sphereClone.Parent then\n\t\t\tsphereClone:Destroy()\n\t\tend\n\tend)\n\t\n\tsphereClone.Touched:Connect(function(hit)\n\t\tlocal hitCharacter = hit.Parent and hit.Parent:FindFirstChildOfClass(\"Humanoid\")\n\t\tif hitCharacter and hitCharacter.Parent ~= player.Character and not damagedPlayers[hitCharacter.Parent] then\n\t\t\thitCharacter:TakeDamage(player.Strength.Value)\n\t\t\tdamagedPlayers[hitCharacter.Parent] = true\n\t\t\tTag(player, hitCharacter)\n\t\tend\n\tend)\nend\n\nlocal function spiritBomb(player, targetPos)\n\tlocal damagedPlayers = {}\n\tlocal head = player.Character.Head\n\tlocal spiritbombClone = rep[\"Spirit Bomb\"]:Clone()\n\tspiritbombClone.Parent = workspace\n\tspiritbombClone:SetPrimaryPartCFrame(head.CFrame * CFrame.new(0, 50, 0))\n\ttask.wait(1)\n\tlocal cf = spiritbombClone:GetPrimaryPartCFrame()\n\tlocal hit = CFrame.new(targetPos)\n\t-- linear interpolation ? \n\tfor i = 1, 69 do\n\t\tspiritbombClone:SetPrimaryPartCFrame(cf:Lerp(hit, i/69))\n\t\ttask.wait()\n\tend\n\t--explosion\n\tlocal inner = spiritbombClone.big\n\tlocal outer = spiritbombClone.small\n\tlocal hitbox = spiritbombClone.Hitbox\n\tlocal originalSizeInner = inner.Size\n\tlocal originalSizeOuter = outer.Size\n\tlocal originalSizeHitbox = inner.Size\n\tlocal scaleFactor = Vector3.new(100,100,100)\n\t\n\tspiritbombClone.Hitbox.Touched:Connect(function(hit)\n\t\tlocal hitCharacter = hit.Parent and hit.Parent:FindFirstChildOfClass(\"Humanoid\")\n\t\tif hitCharacter then\n\t\t\tif hitCharacter.Parent ~= player.Character and not damagedPlayers[hitCharacter.Parent] then\n\t\t\t\thitCharacter:TakeDamage(player.Psychic.Value)\n\t\t\t\tdamagedPlayers[hitCharacter.Parent] = true\n\t\t\t\t\n\t\t\t\tTag(player, hitCharacter)\n\t\t\tend\n\t\tend\n\tend)\n\t\n\tfor i = 1, 69 do\n\t\tinner.Size = originalSizeInner:Lerp(originalSizeInner + scaleFactor, i/69)\n\t\touter.Size = originalSizeOuter:Lerp(originalSizeOuter + scaleFactor, i/69)\n\t\thitbox.Size = originalSizeHitbox:Lerp(originalSizeHitbox + scaleFactor, i/69)\n\t\tinner.Transparency = i/69\n\t\touter.Transparency = .5 + i/69\n\t\ttask.wait()\n\tend\n\tspiritbombClone:Destroy()\nend\n\nlocal function SendSnowball(player, targetPos)\n\t--anim\n\tlocal humanoid = player.Character:FindFirstChildOfClass(\"Humanoid\")\n\tif not humanoid then\n\t\twarn(\"Humanoid not found in player's character\")\n\t\treturn\n\tend\n\tlocal animation = Instance.new(\"Animation\")\n\tanimation.AnimationId = \"rbxassetid://\" .. tostring(15407946022)\n\n\tlocal animationTrack = humanoid:LoadAnimation(animation)\n\tplayer.Character.Animate.Enabled = false\n\tanimationTrack:Play()\n\ttask.wait()\n\tplayer.Character.Animate.Enabled = true\n\t\n\t\n\tlocal workspaceChildren = workspace:GetChildren()\n\tlocal workspaceChildrenFiltered = {}\n\t\n\n\tfor _, child in ipairs(workspaceChildren) do\n\t\tif child ~= player.Character and child.Name ~= \"Zones\" then\n\t\t\ttable.insert(workspaceChildrenFiltered, child)\n\t\tend\n\tend\n\n\tlocal Projectile = require(Modules.Projectiles).new(0, workspaceChildrenFiltered, Vector3.new(0,0,0), 10, true)\n\tlocal hitInstance = Projectile:Cast(player.Character.Head.Position, targetPos, 5, player.Strength.Value)\n\n\tif hitInstance then\n\t\tprint(\"Hit Instance:\", hitInstance)\n\t\tTag(player, hitInstance)\n\telse\n\t\tprint(\"No hit detected.\")\n\tend\nend\n\nlocal function getClosestPlayer(fromPlayer)\n\tlocal closestPlayer = nil\n\tlocal shortestDistance = math.huge -- Infinite distance, to be replaced by a smaller distance\n\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tif player ~= fromPlayer and player.Character and player.Character.PrimaryPart then\n\t\t\tlocal distance = (fromPlayer.Character.PrimaryPart.Position - player.Character.PrimaryPart.Position).Magnitude\n\t\t\tif distance < shortestDistance then\n\t\t\t\tshortestDistance = distance\n\t\t\t\tclosestPlayer = player\n\t\t\tend\n\t\tend\n\tend\n\n\treturn closestPlayer\nend\n\n-- Function to send a rocket to the closest player\nlocal function SendRocket(player, targetPos)\n\tlocal closestPlayer = getClosestPlayer(player)\n\n\tif not closestPlayer then\n\t\tprint(\"No other players found.\")\n\tend\n\n\t-- Clone the rocket from ReplicatedStorage\n\tlocal rocket = rep.Rocket:Clone()\n\trocket.Parent = game.Workspace.Rockets\n\n\t-- Find or create the Goal value and set it to the closest player\n\tlocal goalValue = rocket:FindFirstChild(\"Goal\")\n\tif not goalValue then\n\t\tgoalValue = Instance.new(\"ObjectValue\")\n\t\tgoalValue.Name = \"Goal\"\n\t\tgoalValue.Parent = rocket\n\tend\n\tif not closestPlayer then\n\t\tlocal goal = Instance.new(\"Part\")\n\t\tgoal.Size = Vector3.new(.1,.1,.1)\n\t\tgoal.Position = Vector3.new(targetPos.X, targetPos.Y, targetPos.Z)\n\t\tgoal.Parent = game.Workspace.Rockets\n\t\tgoal.Anchored = true\n\t\tgoal.Transparency = 1\n\t\tgoal.CanCollide = false\n\t\tgoal.CanQuery = false\n\t\tgoalValue.Value = goal\n\t\tDebris:AddItem(goal, 10)\n\telse\n\t\tgoalValue.Value = closestPlayer.Character.PrimaryPart\n\tend\n\n\t-- Find or create the Owner value and set it to the player who sent the rocket\n\tlocal ownerValue = rocket:FindFirstChild(\"Owner\")\n\tif not ownerValue then\n\t\townerValue = Instance.new(\"ObjectValue\")\n\t\townerValue.Name = \"Owner\"\n\t\townerValue.Parent = rocket\n\tend\n\townerValue.Value = player.Character\n\n\t-- Position the rocket slightly in front of the player\n\tlocal playerPrimaryPart = player.Character.PrimaryPart\n\tlocal playerLookVector = playerPrimaryPart.CFrame.LookVector -- Direction the player is facing\n\tlocal offsetDistance = 5 -- Distance to position the rocket in front of the player\n\n\t-- Set the rocket's position to be a bit in front of the player's primary part\n\trocket:SetPrimaryPartCFrame(playerPrimaryPart.CFrame) -- + playerLookVector * offsetDistance)\n\n\tif closestPlayer then\n\t\tprint(\"Rocket sent to the closest player:\", closestPlayer.Name)\n\telse\n\t\tprint(\"Sending rocket, no players found tho\")\n    end\nend\n\nlocal function killIntent(player)\n\tfor _, otherplayer in Players:GetPlayers() do\n\t\t-- Skip the target player\n\t\tif otherplayer ~= player then\n\t\t\tlocal char = otherplayer.Character\n\t\t\tlocal hrp = char and char:FindFirstChild(\"HumanoidRootPart\")\n\n\t\t\tif hrp then\n\t\t\t\t-- Calculate the distance between the target player and the current player\n\t\t\t\tlocal distance = (player.Character.HumanoidRootPart.Position - hrp.Position).magnitude\n\n\t\t\t\t-- Print the player names if within 40 studs\n\t\t\t\tif distance <= 40 then\n\t\t\t\t\tprint(player.Name .. \" and \" .. otherplayer.Name .. \" are within 40 studs of each other.\")\n\t\t\t\t\tlocal function DoAction()\n\t\t\t\t\t\tlocal Attachment0 = Instance.new(\"Attachment\")\n\t\t\t\t\t\tAttachment0.Parent = player.Character.RightHand\n\n\t\t\t\t\t\tlocal Attachment1 = Instance.new(\"Attachment\")\n\t\t\t\t\t\tAttachment1.Parent = char.HumanoidRootPart\n\n\t\t\t\t\t\tlocal Beam = rep.Beams.KillIntentBeam:Clone()\n\t\t\t\t\t\tBeam.Parent = player.Character.RightHand\n\t\t\t\t\t\tBeam.Attachment0 = Attachment0\n\t\t\t\t\t\tBeam.Attachment1 = Attachment1\n\n\t\t\t\t\t\tchar.HumanoidRootPart.Anchored = true\n\t\t\t\t\t\tplayer.Character.HumanoidRootPart.Anchored = true\n\t\t\t\t\t\tDebris:AddItem(Beam,3)\n\t\t\t\t\t\tfor i = 1, 6 do\n\t\t\t\t\t\t\totherplayer.Character.Humanoid:TakeDamage(player.Psychic.Value/6)\n\t\t\t\t\t\t\ttask.wait(.5)\n\t\t\t\t\t\tend\n\t\t\t\t\t\tchar.HumanoidRootPart.Anchored = false\n\t\t\t\t\t\tplayer.Character.HumanoidRootPart.Anchored = false\n\t\t\t\t\tend\n\t\t\t\t\ttask.spawn(DoAction)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\nlocal function HeatVision(player, targetPos)\n\tlocal MousePos = targetPos\n\tlocal character = player.Character or player.CharacterAdded:Wait()\n\tlocal head = character:WaitForChild(\"Head\")\n\tlocal humanoidRootPart = character:WaitForChild(\"HumanoidRootPart\")\n\tplayer.StopPlayer.Value = true\n\tUpdatePlayerMaxHealthSpeedAndJump(player)\n\n\t-- Function to create the RaycastParams for the beam\n\tlocal function createRayParams(excludedInstances)\n\t\tlocal rayParams = RaycastParams.new()\n\t\trayParams.FilterType = Enum.RaycastFilterType.Exclude\n\t\trayParams.FilterDescendantsInstances = excludedInstances\n\t\trayParams.IgnoreWater = true\n\t\treturn rayParams\n\tend\n\n\t-- Function to create the Beam part\n\tlocal function createBeam(color)\n\t\tlocal beamPart = Instance.new(\"Part\")\n\t\tbeamPart.Name = \"BeamPart\"\n\t\tbeamPart.Anchored = true\n\t\tbeamPart.CanCollide = false\n\t\tbeamPart.Color = color\n\t\tbeamPart.Material = Enum.Material.Neon\n\t\tbeamPart.Size = Vector3.new(0.1, 0.1, 1)  -- Initial size\n\t\tbeamPart.Parent = workspace\n\t\tlocal LazerScript = ServerStotage.Lazerscript:Clone()\n\t\tLazerScript.Parent = beamPart\n\t\tLazerScript.ThePlayer.Value = player\n\t\treturn beamPart\n\tend\n\t-- Explosion effect function\n\tlocal function createExplosionEffect(position)\n\t\tlocal Speed = 1\n\n\t\tlocal explosionPart = Instance.new(\"Part\")\n\t\texplosionPart.Name = \"ExplosionEffect\"\n\t\texplosionPart.Shape = Enum.PartType.Ball\n\t\texplosionPart.Size = Vector3.new(1, 1, 1)\n\t\texplosionPart.Position = position\n\t\texplosionPart.Color = Color3.fromRGB(255, 0, 0)\n\t\texplosionPart.Material = Enum.Material.SmoothPlastic\n\t\texplosionPart.Transparency = 0.7569\n\t\texplosionPart.Anchored = true\n\t\texplosionPart.CanCollide = false\n\t\texplosionPart.Parent = workspace\n\n\t\t-- Animate the explosion effect\n\t\tlocal tweenService = game:GetService(\"TweenService\")\n\t\tlocal tweenInfo = TweenInfo.new(Speed, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)\n\t\tlocal goal = {Size = Vector3.new(25, 25, 25)}\n\t\tlocal tween = tweenService:Create(explosionPart, tweenInfo, goal)\n\t\ttween:Play()\n\n\t\t-- Clean up after 2 seconds\n\t\tgame:GetService(\"Debris\"):AddItem(explosionPart, Speed)\n\tend\n\n\t-- Create the beams for the left and right eyes\n\tlocal leftEyeBeam = createBeam(Color3.new(0.745098, 0.0980392, 0.0392157))\n\tlocal rightEyeBeam = createBeam(Color3.new(0.745098, 0.0980392, 0.0392157))\n\n\t-- Function to get the eye position based on offset\n\tlocal function getEyePosition(eyeOffset)\n\t\t-- Ensure the position is based on the current head CFrame\n\t\tlocal eyePosition = head.Position + (head.CFrame:VectorToWorldSpace(eyeOffset))\n\t\treturn eyePosition\n\tend\n\n\t-- Function to calculate and position the beams\n\tlocal function calculateBeam(eyePosition, MousePos, beamPart)\n\t\tlocal direction = (MousePos - eyePosition).unit\n\t\tlocal maxDistance = 500\n\t\tlocal rayParams = createRayParams({beamPart, character})\n\t\tlocal hitResult = workspace:Raycast(eyePosition, direction * maxDistance, rayParams)\n\t\tlocal hitPosition\n\t\tlocal distance\n\n\t\tif hitResult and hitResult.Instance and hitResult.Instance:IsA(\"BasePart\") then\n\t\t\thitPosition = hitResult.Position\n\t\t\tdistance = (hitPosition - eyePosition).magnitude\n\t\t\t\n\t\t\tif hitResult.Instance.Parent.Name == \"Rocket\" then\n\t\t\t\tcreateExplosionEffect(hitResult.Instance.Parent.PrimaryPart.Position)\n\t\t\t\thitResult.Instance.Parent:Destroy()\n\t\t\t\tplayer.Kills.RocketDestroyed.Value += 1\n\t\t\tend\n\t\t\t\n\t\telse\n\t\t\thitPosition = eyePosition + direction * maxDistance\n\t\t\tdistance = maxDistance\n\t\tend\n\n\t\t-- Set the size and position of the beam\n\t\tlocal midPoint = (eyePosition + hitPosition) / 2\n\t\tbeamPart.Size = Vector3.new(0.1, 0.1, distance)\n\t\tbeamPart.CFrame = CFrame.new(midPoint, hitPosition)\n\tend\n\n\t-- Variable to store last update time\n\tlocal lastUpdateTime = 0\n\tlocal updateInterval = 0  -- This ensures every frame is updated\n\n\t-- Heartbeat connection to update the beams every frame\n\tlocal heartbeatConnection\n\theartbeatConnection = RunService.Heartbeat:Connect(function()\n\t\tlocal currentTime = tick()\n\t\tif currentTime - lastUpdateTime >= updateInterval then\n\t\t\tlastUpdateTime = currentTime\n\n\t\t\t-- Continuously recalculate the eye positions and beams every frame\n\t\t\tlocal leftEyeOffset = Vector3.new(-0.25, 0.25, 0)\n\t\t\tlocal rightEyeOffset = Vector3.new(0.25, 0.25, 0)\n\t\t\tlocal leftEyePosition = getEyePosition(leftEyeOffset)\n\t\t\tlocal rightEyePosition = getEyePosition(rightEyeOffset)\n\n\t\t\t-- Recalculate beams based on the current eye position and mouse position\n\t\t\tcalculateBeam(leftEyePosition, MousePos, leftEyeBeam)\n\t\t\tcalculateBeam(rightEyePosition, MousePos, rightEyeBeam)\n\t\tend\n\tend)\n\n\t-- Event to update Mouse Position in real-time\n\trep.TargetPosition.OnServerEvent:Connect(function(plr, pos)\n\t\tif plr == player then\n\t\t\tMousePos = pos\n\t\tend\n\tend)\n\n\t-- Function to remove the beams after 5 seconds\n\tlocal function removeBeams()\n\t\tleftEyeBeam:Destroy()\n\t\trightEyeBeam:Destroy()\n\t\theartbeatConnection:Disconnect()\n\t\tplayer.StopPlayer.Value = false\n\t\tUpdatePlayerMaxHealthSpeedAndJump(player)\n\tend\n\n\t-- Set a delay to remove the beams after 5 seconds\n\tdelay(5, removeBeams)\nend\n\nrep.State.Jump.OnServerEvent:Connect(function(player)\n\tcoroutine.wrap(addAgility)(player)\nend)\n\nrep.State.Speed.OnServerEvent:Connect(function(player)\n\tcoroutine.wrap(addSwiftness)(player)\nend)\n\nrep.Skills.Teleport.OnServerEvent:Connect(function(player, targetPos)\n\tcoroutine.wrap(teleportPlayer)(player, targetPos)\nend)\n\nrep.Skills.Snowball.OnServerEvent:Connect(function(player, targetPos)\n\tcoroutine.wrap(SendSnowball)(player, targetPos)\nend)\n\nrep.Skills.HeatVision.OnServerEvent:Connect(function(player, targetPos)\n\tcoroutine.wrap(HeatVision)(player, targetPos)\nend)\n\nrep.Skills.Sphere.OnServerEvent:Connect(function(player, targetPos)\n\tcoroutine.wrap(throwSphere)(player, targetPos)\nend)\n\nrep.Skills.SpiritBomb.OnServerEvent:Connect(function(player, targetPos)\n\tcoroutine.wrap(spiritBomb)(player, targetPos)\nend)\n\nrep.Skills.Rocket.OnServerEvent:Connect(function(player, targetPos)\n\tcoroutine.wrap(SendRocket)(player, targetPos)\nend)\n\nrep.Skills.KillIntent.OnServerEvent:Connect(function(player, targetPos)\n\tcoroutine.wrap(killIntent)(player)\nend)\n\n--Specials moves\nrep.Skills.Special.Move1.OnServerEvent:Connect(function(player)\n\tprint(\"Move1\")\nend)\n\nrep.Skills.Special.Move2.OnServerEvent:Connect(function(player)\n\tprint(\"Move2\")\nend)\n---end of specials moves\n\n--that thing be checking whenever a player respawn ma gee\nlocal NameTag = rep.NameTag\ngame.Players.PlayerAdded:Connect(function(player)\n\tplayer.CharacterAdded:Connect(function(character)\n\t\tgiveAura(player)\n\t\tSetPlayerMaxHealthSpeedAndJump(player)\n\t\tlocal plrTag = NameTag:Clone()\n\t\tplrTag.Parent = character.Head\n        SetPlrRank(player)\n\tend)\nend)\n\n--check when player die\ngame.Players.PlayerAdded:Connect(function(player)\n\tplayer.CharacterAdded:Connect(function(character)\n\t\tcharacter.Humanoid.Died:Connect(function()\n\t\t\tplayer.OLDAURA.Value = \"X\"\n\t\t\t\n\t\t\tlocal tag = character.Humanoid:FindFirstChild(\"creator\")\n\t\t\tif tag then\n\t\t\t\tlocal killer = tag.Value\n\t\t\t\tgiverep(killer, player)\n\t\t\t\tplayer.Rep.Value = 0\n\t\t\telse\n\t\t\t\tplayer.Rep.Value = 0\n\t\t\tend\n\t\tend)\n\tend)\nend)\n\nrep.Shift.IsHoldingShift.OnServerEvent:Connect(function(player, value)\n\tplayer.HoldingShift.Value = value\n\ttask.spawn(UpdatePlayerMaxHealthSpeedAndJump, player)\nend)\n\nrep.SpentCoins.OnServerEvent:Connect(function(player, value)\n\tplayer.SpentCoins.Value += value\nend)\n\nwhile task.wait(30) do\n\tfor i,v in pairs(game:GetService(\"Players\"):GetPlayers()) do\n\t\tv.Coins.Value+=5\n\tend\nend\n"} 
